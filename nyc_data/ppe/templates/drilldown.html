{% extends "base.html" %}
{% load ppe_extras %}

{% block titlebar %}
<h2>{{ asset_category }}</h2>
{% endblock %}

{% block content %}
<div class="incoming-supply">
    <h2>Incoming Supply (Total Scheduled: {{scheduled_total|pretty_num}})</h2>
    <p>Scheduled for delivery in:</p>
    <ul>
        <li><b>Past:</b> {{deliveries_past|pretty_num}}</li>
        <li><b>Next 3 days:</b> {{deliveries_next_three|pretty_num}}</li>
        <li><b>Next 7 days:</b> {{deliveries_next_week|pretty_num}}</li>
        <li><b>Next 30 days:</b> {{deliveries_next_thirty|pretty_num}}</li>
    </ul>
    {% regroup deliveries by delivery_date as date_list %}
    {% for day in date_list %}
    {% if forloop.first %}<dl>{% endif %}
        <dt>{{day.grouper}}</dt>

        {% for delivery in day.list %}
        <dd class="tooltip" aria-label="{{delivery.vendor}}">Receiving <span
                class="quantity">{{ delivery.quantity|pretty_num }}</span> {{ delivery.item }} –
            {{ delivery.description|default:"No description" }}</dd>
        {% endfor %}
        {% if forloop.last %}</dl>{% endif %}
    {% endfor %}

    <br />
    <hr />

    <h2>Unscheduled Supply (Total: {{ unscheduled_total | pretty_num }})</h2>
    <ul>
        {% for purchase in purchases %}
        {% if purchase.unscheduled_quantity %}
        <li class="tooltip" aria-label="{{purchase.vendor}}">
            Receiving {{purchase.unscheduled_quantity|pretty_num}} {{ purchase.item }} –
            {{purchase.description|default:"No description"}}
        </li>
        {% endif %}
        {% endfor %}
    </ul>
</div>
{% endblock %}